{
    "pluginAlias": "Doorbird",
    "pluginType": "platform",
    "singular": true,
    "headerDisplay": "Doorbird Video Stations are exposed to HomeKit as separate accessories and each needs to be manually paired.\n\n1. Open the Home <img src='https://user-images.githubusercontent.com/3979615/78010622-4ea1d380-738e-11ea-8a17-e6a465eeec35.png' height='16.42px'> app on your device.\n2. Tap the Home tab, then tap <img src='https://user-images.githubusercontent.com/3979615/78010869-9aed1380-738e-11ea-9644-9f46b3633026.png' height='16.42px'>.\n3. Tap *Add Accessory*, and select *I Don't Have a Code or Cannot Scan*.\n4. Enter the Homebridge PIN, this can be found under the QR code in Homebridge UI or your Homebridge logs, alternatively you can select *Use Camera* and scan the QR code again.\n\nFor help and examples of common configurations please read the [wiki](https://github.com/KhaosT/homebridge-camera-ffmpeg/wiki).",
    "footerDisplay": "The **ffmpeg** binary must be installed on your system for this plugin to work.",
    "schema": {
        "name": {
            "title": "Name",
            "type": "string"
        },

        "videoProcessor": {
            "title": "Video Processor",
            "type": "string"
        },

        "port": {
            "title": "Port",
            "type": "integer"
        },
        
        "cameras": {
            "type": "array",
            "items": {
                "title": "Doorbird Configuration",
                "type": "object",
                "properties": {
                    "name": {
                        "title": "Doorbird Name",
                        "type": "string",
                        "placeholder": "Doorbird",
                        "required": true
                    },
                    
                    "doorbird": {
                        "title": "DoorBird IP",
                        "placeholder": "Enter Doorbird Video Station IP address",
                        "type": "string",
                        "required": true,
                        "format": "ipv4"
                    },
                    
                    "username": {
                        "type": "string",
                        "placeholder": "Enter Doorbird Video Station username",
                        "required": true
                    },
                    
                    "password": {
                        "type": "string",
                        "placeholder": "Enter Doorbird Video Station password",
                        "required": true
                    },
                    
                    "audio": {
                        "title": "Enable Audio (requires ffmpeg with libfdk-aac)",
                        "type": "boolean"
                    },
                            
                    "cmdDoorbell": {
                        "title": "Command line to execute when a doorbell event is detected.",
                        "type": "string"
                    },
                    
                    "cmdMotion": {
                        "title": "Command line to execute when a motion event is detected.",
                        "type": "string"
                    },

                    "defaultRelay": {
                        "title": "Default relay to trigger for doorbell lock events.",
                        "default": "1",
                        "type": "string"
                    },

                    "port": {
                        "title": "Port",
                        "type": "number",
                        "desciption": "Port to use for the Doorbird notification server."
                    },

                    "videoConfig": {
                        "title": "Video Configuration",
                        "type": "object",
                        "properties": {
                            "maxStreams": {
                                "title": "Maximum Number of Streams",
                                "type": "integer",
                                "default": 4,
                                "minimum": 1,
                                "description": "The maximum number of streams that will be generated for this camera"
                            },
                            
                            "maxWidth": {
                                "title": "Maximum Width",
                                "type": "integer",
                                "default": 1280,
                                "minimum": 1,
                                "description": "The maximum width reported to HomeKit"
                            },
                            
                            "maxHeight": {
                                "title": "Maximum Height",
                                "type": "integer",
                                "default": 720,
                                "minimum": 1,
                                "description": "The maximum height reported to HomeKit"
                            },
                            
                            "maxFPS": {
                                "title": "Maximum FPS",
                                "type": "integer",
                                "default": 15,
                                "description": "The maximum frame rate of the stream"
                            },
                            
                            "packetSize": {
                                "title": "Packet Size (in multiples of 188)",
                                "type": "number",
                                "default": 376,
                                "multipleOf": 188.0
                            },
                            
                            "additionalCommandline": {
                                "title": "Additional command line options for ffmpeg",
                                "type": "string",
                                "description": "Additional command line options to use with FFmpeg, for example '-loglevel verbose'"
                            },
                            
                            "debug": {
                                "title": "Enable Debug Mode",
                                "type": "boolean"
                            }
                        }
                    }
                }
            }
        }
    },
    "layout": [
        {
            "key": "cameras",
            "title": "Doorbird",
            "type": "array",
            "orderable": false,
            "buttonText": "Add Doorbird",
            "items": [
                "cameras[].name",
                "cameras[].doorbird",
                "cameras[].username",
                "cameras[].password",
                "cameras[].audio",
                "cameras[].defaultRelay",
                "cameras[].cmdDoorbell",
                "cameras[].cmdMotion",
                "cameras[].port",
                {
                    "key": "cameras[].videoConfig",
                    "type": "section",
                    "title": "Advanced FFmpeg Video Settings",
                    "expandable": true,
                    "expanded": false,
                    "items": [
                        "cameras[].videoConfig.maxStreams",
                        "cameras[].videoConfig.maxWidth",
                        "cameras[].videoConfig.maxHeight",
                        "cameras[].videoConfig.maxFPS",
                        "cameras[].videoConfig.packetSize",
                        "cameras[].videoConfig.additionalCommandline"
                    ]
                }
            ]
        }
    ]
}
