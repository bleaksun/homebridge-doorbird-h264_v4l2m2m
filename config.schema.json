{
  "pluginAlias": "Doorbird",
  "pluginType": "platform",
  "singular": true,
  "headerDisplay": "homebridge-doorbird: Nearly complete HomeKit support for Doorbird. See the [Github project page](https://github.com/brownad/homebridge-doorbird) for more documentation.",
  "footerDisplay": "The **ffmpeg** binary must be installed on your system for this plugin to work.<BR>For audio support, make sure your version of ffmpeg is compiled with support for **fdk-aac**.",
  "schema": {
    "type": "object",
    "properties": {
      "name": {
        "title": "Name",
        "description": "Name to use for logging purposes in homebridge. Default: Doorbird",
        "type": "string"
      },

      "videoProcessor": {
        "title": "Video Processor",
        "description": "Path to ffmpeg or your preferred video processor. Default: ffmpeg",
        "type": "string"
      },

      "ffmpegOptions": {
        "title": "FFmpeg Options",
        "description": "Alternate command line options for ffmpeg.",
        "type": "string"
      },

      "doorbirds": {
        "type": "array",
        "items": {
          "title": "Doorbird Configuration",
          "type": "object",
          "properties": {
            "name": {
              "title": "Doorbird Name",
              "description": "Name to use for this Doorbird.",
              "type": "string"
            },

            "ip": {
              "title": "DoorBird IP Address",
              "description": "IP address for this Doorbird.",
              "type": "string",
              "format": "ipv4",
              "placeholder": "Enter Doorbird IP address",
              "required": true
            },

            "username": {
              "title": "Username",
              "description": "Username for this Doorbird",
              "type": "string",
              "placeholder": "Enter Doorbird username",
              "required": true
            },

            "password": {
              "title": "Password",
              "description": "Password for the Doorbird user.",
              "type": "string",
              "placeholder": "Enter Doorbird password",
              "required": true
            },

            "primaryRelay": {
              "title": "Primary Relay",
              "description": "Primary relay to trigger for doorbell lock events. Default: 1",
              "type": "string"
            },

            "nightVisionSnapshot": {
              "title": "Use Night Vision for Snapshots (Always)",
              "description": "Always enable night vision for snapshots.",
              "type": "boolean"
            },

            "nightVisionDoorbell": {
              "title": "Use Night Vision for Doorbell (Always)",
              "description": "Always enable night vision when a doorbell event is detected.",
              "type": "boolean"
            },

            "nightVisionVideo": {
              "title": "Use Night Vision for Video (Always)",
              "description": "Always enable night vision for video streaming.",
              "type": "boolean"
            },

            "nightVisionSnapshotNight": {
              "title": "Use Night Vision for Snapshots (Night)",
              "description": "Always enable night vision for snapshots at night.",
              "type": "boolean"
            },

            "nightVisionDoorbellNight": {
              "title": "Use Night Vision for Doorbell (Night)",
              "description": "Always enable night vision when a doorbell event is detected at night.",
              "type": "boolean"
            },

            "nightVisionVideoNight": {
              "title": "Use Night Vision for Video (Night)",
              "description": "Always enable night vision for video streaming at night.",
              "type": "boolean"
            },

            "snapshotUrl": {
              "title": "Snapshot URL",
              "description": "Alternate URL to use for Doorbird snapshots in HomeKit. This URL must return an image.",
              "type": "string"
            },

            "cmdDoorbell": {
              "title": "Doorbell Command",
              "description": "Command line to execute when a doorbell event is detected.",
              "type": "string"
            },

            "cmdMotion": {
              "title": "Motion Command",
              "description": "Command line to execute when a motion event is detected.",
              "type": "string"
            },

            "options": {
              "title": "Doorbird Feature Options",
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        }
      },

      "debug": {
        "title": "Plugin Debug Mode",
        "description": "Enable debug mode for the plugin.",
        "type": "boolean"
      }
    }
  },

  "layout": [
    {
      "key": "",
      "title": "General Options",
      "type": "fieldset",
      "orderable": false,
      "expandable": true,
      "expanded": false,
      "items": [
        "name",
        "videoProcessor"
      ]
    },

    {
      "key": "doorbirds",
      "title": "Doorbirds",
      "buttonText": "Add Doorbird",
      "type": "fieldset",
      "orderable": false,
      "expandable": true,
      "expanded": false,
      "items": [
        "doorbirds[].ip",
        "doorbirds[].username",
        "doorbirds[].password",
        "doorbirds[].name",
        "doorbirds[].primaryRelay",
        "doorbirds[].snapshotUrl",
        "doorbirds[].nightVisionSnapshotNight",
        "doorbirds[].nightVisionDoorbellNight",
        "doorbirds[].nightVisionVideoNight",
        "doorbirds[].nightVisionSnapshot",
        "doorbirds[].nightVisionDoorbell",
        "doorbirds[].nightVisionVideo",
        "doorbirds[].cmdDoorbell",
        "doorbirds[].cmdMotion",
        {
          "name": "Doorbird Feature Options (Optional)",
          "buttonText": "Add Feature Option To This Doorbird",
          "type": "array",
          "orderable": false,
          "expandable": true,
          "expanded": true,
          "items": [
            {
              "key": "doorbirds[].options[]",
              "description": "Enter only one option per entry. See project page for the complete list of available options.",
              "placeholder": "e.g. Relay.Hide.2"
            }
          ]
        }
      ]
    },

    {
      "key": "",
      "title": "Advanced Options (Optional)",
      "type": "fieldset",
      "orderable": false,
      "expandable": true,
      "expanded": false,
      "items": [
        "ffmpegOptions",
        "debug"
      ]
    }
  ]
}
